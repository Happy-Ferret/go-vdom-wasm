Widely inspired by https://github.com/mbasso/asm-dom
